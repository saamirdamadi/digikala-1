(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1641,282],{93401:function(e,t,n){var o=n(24303),s=n(67878);e.exports=function(e,t){var n=-1,i=s(e)?Array(e.length):[];return o(e,function(e,o,s){i[++n]=t(e,o,s)}),i}},23813:function(e,t,n){var o=n(50343),s=n(13324),i=n(68286),l=n(93401),r=n(27095),a=n(47826),u=n(18477),c=n(23059),d=n(86152);e.exports=function(e,t,n){t=t.length?o(t,function(e){return d(e)?function(t){return s(t,1===e.length?e[0]:e)}:e}):[c];var p=-1;return t=o(t,a(i)),r(l(e,function(e,n,s){return{criteria:o(t,function(t){return t(e)}),index:++p,value:e}}),function(e,t){return u(e,t,n)})}},27095:function(e){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},27520:function(e,t,n){var o=n(4795);e.exports=function(e,t){if(e!==t){var n=void 0!==e,s=null===e,i=e==e,l=o(e),r=void 0!==t,a=null===t,u=t==t,c=o(t);if(!a&&!c&&!l&&e>t||l&&r&&u&&!a&&!c||s&&r&&u||!n&&u||!i)return 1;if(!s&&!l&&!c&&e<t||c&&n&&i&&!s&&!l||a&&n&&i||!r&&i||!u)return -1}return 0}},18477:function(e,t,n){var o=n(27520);e.exports=function(e,t,n){for(var s=-1,i=e.criteria,l=t.criteria,r=i.length,a=n.length;++s<r;){var u=o(i[s],l[s]);if(u){if(s>=a)return u;return u*("desc"==n[s]?-1:1)}}return e.index-t.index}},34498:function(e,t,n){var o=n(23813),s=n(86152);e.exports=function(e,t,n,i){return null==e?[]:(s(t)||(t=null==t?[]:[t]),s(n=i?void 0:n)||(n=null==n?[]:[n]),o(e,t,n))}},29851:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/magnet/feed",function(){return n(42366)}])},14433:function(e,t,n){"use strict";n.d(t,{A4:function(){return r},Cb:function(){return i},Mb:function(){return s},_9:function(){return o},dF:function(){return l}});var o="/statics/img/svg/promotionCenter",s="category-tabs-slider",i="/statics/img/svg/profile/magnet-default-avatart.svg",l="/statics/img/svg/promotionCenter/shopping-bag.svg",r={id:876,type:"static"}},6726:function(e,t,n){"use strict";n.d(t,{J:function(){return g}});var o=n(52322),s=n(66582),i=n(57931),l=n(31909),r=n(98723),a=n(72610),u=n(50603),c=n(38168),d=n(11559),p=n(80803),m=n(92619),f=n(82332),h=n(72677),x=n(62075),v=(0,n(1324).q)({url:"/application-file/",transformer:function(e){return{downloadUrl:(e.data||{}).url}}});function g(e){var t=e.className,n=e.handleOnClose,g=e.buttonClassName,_=e.onDataTracker,C=(0,p.d)(),j=C.isOpen,N=C.onOpen,I=C.onClose,k="iOS"===s.BF?c.Cm:c.Ql,w=(0,m.S)(),y=(0,d.E)({apiMethod:v,onSuccess:function(e){var t=e.downloadUrl;window.open(t)}}),b=y.request,O=y.pending;return w?null:(0,o.jsxs)("div",{className:(0,h.d)("w-full z-2 flex justify-between items-center user-select-none mt-5",t),children:[(0,o.jsx)(i.z,{className:(0,h.d)("w-full",g),size:"large",color:"primary",onClick:function(){N(),(0,x.y)(),_&&_()},prependIcon:"cube-comm-mobile",children:"دریافت اپلیکیشن"}),(0,o.jsx)(u.Modal,{isOpen:j,onDismiss:I,headerTitle:"دانلود اپلیکیشن دیجی‌کالا",children:(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[null==k?void 0:k.map(function(e,t){return(0,o.jsx)(r.r,{to:e.link,className:"w-full border-none",target:"_blank",onClick:n,shouldHandleUrlAndOnClick:!0,children:(0,o.jsx)(l.E,{src:e.darkLogo,alt:"Digikala"})},t)}),!(0,f.t)(s.BF,"iOS")&&(0,o.jsxs)(r.r,{className:"border-none w-full relative",target:"_blank",onClick:function(){b()},children:[O&&(0,o.jsx)(a.g,{wrapperClassName:"absolute right-0 left-0 top-0 bottom-0 m-auto z-10"}),(0,o.jsx)(l.E,{src:"/statics/img/svg/appStores/download-apk-badge-dark.svg",alt:"Digikala"})]})]})})]})}},24753:function(e,t,n){"use strict";n.d(t,{q:function(){return i}});var o=n(46932),s=n(96207);function i(e){var t,n=e.data||{},i=n.users,l=n.pager;return{users:null==i?void 0:null===(t=i.map)||void 0===t?void 0:t.call(i,function(e){return(0,s.s)({data:e})}),pager:(0,o.d)({data:l})}}},42366:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ty}});var o=n(52322),s=n(98780),i=n(31909),l=n(98723),r=n(42067),a=n(88589),u=n(64665),c=n(26442),d=n(72873),p=n(80803),m=n(87049),f=n(6013),h=n(41701),x=n(75490),v=n(71390),g=n(94234),_=n(66582),C=n(72610),j=n(50603),N=n(38168),I=n(11559),k=n(92619),w=n(82332),y=n(1324),b=(0,y.q)({url:"/application-file/",transformer:function(e){return{downloadUrl:(e.data||{}).url}}}),O=n(14767),S=n.n(O);function P(e){var t=e.onClose,n=e.isOpen,s="iOS"===_.BF?N.Cm:N.Ql,r=(0,k.S)(),a=(0,I.E)({apiMethod:b,onSuccess:function(e){var t=e.downloadUrl;window.open(t)}}),u=a.request,c=a.pending;return r?null:(0,o.jsx)(j.Modal,{isOpen:n,onDismiss:t,headerTitle:"دانلود اپلیکیشن دیجی‌کالا",BottomSheetClassName:S().bottomSheetContainer,children:(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[null==s?void 0:s.map(function(e,t){return(0,o.jsx)(l.r,{to:e.link,className:"w-full border-none",target:"_blank",onClick:function(){return""},shouldHandleUrlAndOnClick:!0,children:(0,o.jsx)(i.E,{src:e.darkLogo,alt:"Digikala"})},t)}),!(0,w.t)(_.BF,"iOS")&&(0,o.jsxs)(l.r,{className:"border-none w-full relative",target:"_blank",onClick:function(){u()},children:[c&&(0,o.jsx)(C.g,{wrapperClassName:"absolute right-0 left-0 top-0 bottom-0 m-auto z-10"}),(0,o.jsx)(i.E,{src:"/statics/img/svg/appStores/download-apk-badge-dark.svg",alt:"Digikala"})]})]})})}var M=(0,y.q)({url:"magnet/init/",transformer:function(e){var t=e.data||{},n=t.user,o=t.notification_count;return{user:{photo:n.photo,username:n.username},notificationCount:o}}}),A=n(66383),U=n(2784),T=n(94133),E=n(52216),Z=n(41435),L=n(46932),R=n(70865),F=n(96670),z=n(70582),B=n(76814),D=n(73587),V=n(62114),J=n(98876),q=n(59647),H=n(5525),X=n(96207),G=(0,y.q)({url:"/magnet/feed/",transformer:function(e){var t=e.data||{},n=t.widgets,o=t.pager;return{posts:(null==n?void 0:n.map(function(e){var t,n,o,s,i,l,r,a,u,c,d,p,m,f,h,x,v,g,_,C,j,N;return i=(s=({data:e.data}).data||{}).id,l=s.title,r=s.caption,a=s.author,u=s.media,c=s.products,d=s.share_urls,p=s.likes_count,m=s.comments_count,f=s.created_at,h=s.tags,x=s.is_user_own_post,v=s.user_reaction,g=s.likes,_=s.circle_cover,C=s.friends_like,j=s.bold_text,N=s.light_text,{postId:i,postTitle:l,postCaption:r,postAuthor:(0,J.U)({data:a}),postProducts:null==c?void 0:c.map(function(e){var t;return t=(0,D.r)({data:e}),(0,F.Z)((0,R.Z)({},t),{productPrice:(0,B.z)({data:e.price})})}),postShareUrls:(0,V.r)({data:d}),postLikesCount:p,postMedia:null==u?void 0:u.map(function(e){return(0,q.n)({data:e})}),postCommentsCount:m,postCreatedAt:f,postTags:null==h?void 0:h.map(function(e){return(0,H.p)({data:e})}),postIsUserOwnPost:x,postUserReaction:(n=(t=v||{}).liked,o=t.saved,{isLiked:Boolean(n),isSaved:Boolean(o)}),postLikes:null==g?void 0:g.map(function(e){return(0,X.s)({data:e})}),postCircleCover:(0,z.W)({data:_}),friendsLike:C,friendsNameLikePost:j,friendsLikeText:N}}))||[],pager:(0,L.d)({data:o})}}}),K=n(95391),Q=n(58013),Y=n(77251),W=n(57033),$=n(24753),ee=(0,y.q)({url:function(e){var t=e.postId;return"magnet/posts/".concat(t,"/likes/")},transformer:$.q}),et=n(87225),en=n(25127),eo=n.n(en);function es(e){var t=e.user||{},n=t.username,s=(t.name,t.photo),r=t.isFollowing;return(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(l.r,{to:(0,c.kK)(n),children:(0,o.jsx)(i.E,{className:"shrink-0",imageClassName:"rounded-circle",src:v.C,image:s,height:50,width:50})}),(0,o.jsxs)("div",{className:"flex w-full justify-between items-center mr-1 py-3",children:[(0,o.jsx)(l.r,{"data-testId":"profile",to:(0,c.kK)(n),className:"mr-2 cursor-pointer",children:(0,o.jsx)("div",{className:"text-body2-strong text-neutral-800",children:n})}),(0,o.jsx)(et.n,{"data-testId":"followUnfollow",className:eo().followUnfollowButton,isFollowing:r,username:n,isNotFollowLabel:"دنبال کردن",isFollowShape:"text",isNotFollowShape:"icon",hasColor:!0})]})]})}function ei(e){var t=e.postId,n=(0,T.a)({apiMethod:ee,apiData:{postId:t}}),s=n.data,i=n.fetchPage,l=n.pending,r=n.items,a=(s||{}).pager,u=(0,U.useMemo)(function(){return Object.entries(r||{}).filter(function(e){var t=(0,A.Z)(e,2)[1];return!(0,Z.x)(t)}).flatMap(function(e){var t=(0,A.Z)(e,2);return(t[0],t[1]).users||[]})},[r,null==a?void 0:a.pagerCurrentPage]),c=(0,U.useMemo)(function(){return function(e){var t=(0,Q.Z)({},(0,Y.Z)(e));return(0,o.jsx)(es,{user:t})}},[]);return(0,o.jsx)(o.Fragment,{children:l&&(0,Z.x)(u)?(0,o.jsx)(C.g,{className:"my-20"}):(0,o.jsx)(W.S,{hidePagination:!0,itemComponent:c,fetchPage:i,pager:a,itemsPerRow:1,items:u,itemHasBorder:!1})})}function el(e){var t=e.isOpen,n=e.onCancel,i=e.title,l=e.postId;return(0,o.jsx)(j.Modal,{isOpen:t,className:"flex justify-center items-center",onDismiss:n,headerTitle:i,hasCloseIcon:!1,headerClassName:"d-none",headerHideBottomBorder:!0,header:(0,o.jsxs)("div",{className:"flex items-center justify-start p-4",children:[(0,o.jsx)(s.J,{icon:"arrowRight",size:24,onClick:n}),(0,o.jsx)("div",{className:"text-h4 text-neutral-800 mr-5",children:"پسندیده‌ها"})]}),children:(0,o.jsx)("div",{className:"h-full","data-testId":"listOfLikes",children:(0,o.jsx)(ei,{postId:l})})})}var er=n(72677),ea=n(14433);function eu(e){var t,n=e.post,s=e.className,l=e.containerClassName,r=(0,p.d)(),a=r.isOpen,u=r.onOpen,c=r.onClose;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:(0,er.d)("flex items-center justify-start pr-5",l),onClick:u,children:[(0,o.jsx)("div",{className:"flex justify-between items-center relative",children:null==n?void 0:null===(t=n.friendsLike)||void 0===t?void 0:t.slice(0,2).map(function(e,t){return(0,o.jsx)(i.E,{width:20,height:20,className:(0,er.d)("shrink-0 ml-2",1===t&&"absolute right-3"),imageClassName:"rounded-circle",src:e.photo?e.photo:ea.Cb,alt:e.name})})}),(0,o.jsx)("div",{className:"mr-2",children:(0,o.jsxs)("span",{className:(0,er.d)("text-neutral-650 text-body2-strong",s),children:[null==n?void 0:n.friendsNameLikePost," ","",(0,o.jsx)("span",{className:(0,er.d)("text-neutral-500 text-body-1",s),children:null==n?void 0:n.friendsLikeText})]})})]}),a&&(0,o.jsx)(el,{isOpen:a,onCancel:c,postId:n.postId})]})}var ec=n(62075),ed=n(88946),ep=n(51207),em=n(50930),ef=n(32e3),eh=n.n(ef),ex=n(18577),ev=function(){return(0,o.jsx)("div",{className:"p-4",children:(0,em.Z)([,,,,,]).map(function(e,t){return(0,o.jsxs)("div",{className:(0,ex.dh)("mb-6 rounded-md",eh().postSkeleton),children:[(0,o.jsxs)("div",{className:"flex items-center py-2 px-4",children:[(0,o.jsx)("div",{className:(0,ex.dh)(eh().avatarSkeleton,"ml-2")}),(0,o.jsx)("div",{className:(0,ex.dh)(eh().usernameSkeleton,"ml-3 rounded-md")})]}),(0,o.jsx)("div",{className:eh().imageSkeleton}),(0,o.jsxs)("div",{className:(0,ex.dh)(eh().contentSkeleton,"p-4"),children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]})]},t)})})},eg=n(61538),e_=n(98788),eC=n(47842),ej=n(5163),eN=n(79593),eI=n(37149),ek=n.n(eI),ew=n(64177),ey=n(15585),eb=n(371),eO=n(98634),eS=n(86671),eP=n(7208),eM=n(57955),eA=n.n(eM);function eU(e){var t=e.className,n=e.postMedia,i=e.playerRef,l=e.isPlaying,r=e.mediaUrl,a=e.isMute,u=e.OnClick,c=e.onVideoTimerUpdate,d=(n||{}).postMediaUrl,p=(0,A.Z)((0,U.useState)({duration:0,playedSeconds:0,playedPercent:0}),2),m=p[0],f=p[1];return(0,o.jsxs)("div",{className:(0,er.d)(t,"relative"),onClick:u,children:[(0,o.jsx)(C.g,{className:"absolute inset-0 mx-auto my-auto z-[-1]"}),(0,o.jsx)("div",{className:(0,er.d)("absolute w-full h-full z-[20]",eA().overlay)}),(0,o.jsxs)("div",{className:"absolute w-full h-full z-[10]",children:[(0,o.jsx)(eP.Y,{url:d||r,height:"100%",width:"100%",ref:i,playing:l,muted:a,loop:!0,onDuration:function(e){var t=(0,F.Z)((0,R.Z)({},m),{duration:Math.floor(e)});f(t),c(t)},onProgress:function(e){var t=e.playedSeconds,n=e.played,o=(0,F.Z)((0,R.Z)({},m),{playedSeconds:t,playedPercent:Math.floor(100*n)});f(o),c(o),n>=.997&&setTimeout(function(){n>=.997&&i.current.seekTo(0,"seconds")},1e3)},style:{pointerEvents:"none",zIndex:"10"}}),a&&(0,o.jsx)(s.J,{color:"white",icon:"speakerMuted",className:"absolute right-0 left-0 top-0 bottom-0 m-auto w-max h-max z-[25]",size:75})]})]})}var eT=n(842),eE=n(29078),eZ=n.n(eE);function eL(e){var t,n,s,l,r=e.className,a=e.videoOnDoubleClick,u=e.preventClicks,c=e.preventClicksPropagation,d=e.simulateTouch,p=e.post,m=e.activePostIndex,f=(0,ew.C)().isDesktop,h=(0,A.Z)((0,U.useState)(0),2),x=h[0],v=h[1],g=(0,A.Z)((0,U.useState)(!1),2),_=g[0],C=g[1],j=(0,A.Z)((0,U.useState)(null),2),N=j[0],I=j[1],k=(0,A.Z)((0,U.useState)({}),2),w=k[0],y=k[1],b=(0,U.useRef)([]),O=(null==p?void 0:null===(t=p.postMedia)||void 0===t?void 0:t.length)===1,S=(null===(n=p.postMedia)||void 0===n?void 0:null===(s=n[x])||void 0===s?void 0:s.postMediaType)==="video",P=function(e,t){y(function(n){return(0,F.Z)((0,R.Z)({},n),(0,eC.Z)({},e,t))})},M=function(){C(function(e){return!e})},T=function(){if(N){var e;clearTimeout(N),I(null),a(),(0,ec.He)({postId:null==p?void 0:p.postId,authorId:null==p?void 0:null===(e=p.postAuthor)||void 0===e?void 0:e.authorId,placeIndex:m})}else{var t=setTimeout(function(){M(),I(null)},300);I(t)}};(0,U.useEffect)(function(){return function(){N&&clearTimeout(N)}},[N]),(0,U.useEffect)(function(){setTimeout(function(){b.current&&b.current.forEach(function(e,t){e&&(t===x&&S?e.getInternalPlayer()&&e.getInternalPlayer().play():e.getInternalPlayer().pause())})},400)},[x,S,b]);var E=(0,U.useCallback)((0,eO.Ds)(function(e){var t=e.value;b.current.forEach(function(e,n){n===x&&e.seekTo(t[0]/100,"fraction")})},300),[x]),Z=function(){b.current&&b.current[x].getInternalPlayer().play()},L=function(){(null==b?void 0:b.current)&&(null==b||b.current[x].getInternalPlayer().play())};return(0,o.jsx)("div",{className:(0,er.d)("relative h-full",r),children:(0,o.jsx)(eS.i,{preventClicks:u,preventClicksPropagation:c,simulateTouch:d,onSlideChange:function(e){v(e.activeIndex)},initialSlide:0,slidesPerView:1,spaceBetween:8,hasPagination:f,className:"h-full",sliderContainerClassName:(0,er.d)("h-full",eZ().sliderContainer),slideClassName:"h-screen",navigationButtonClassName:{prev:"hidden hidden",next:"hidden hidden"},pagination:{clickable:!0,clickableClass:(0,er.d)(O?"d-none":eZ().pagination),bulletClass:(0,er.d)(O?"d-none":"inline-block rounded-circle mx-1 bg-neutral-900",O?"d-none":eZ().slider__pagination),bulletActiveClass:(0,er.d)(O?"d-none":eZ()["slider__pagination--active"])},slidesPerGroup:1,slides:null==p?void 0:null===(l=p.postMedia)||void 0===l?void 0:l.map(function(e,t){switch(e.postMediaType){case"image":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:(0,er.d)("absolute w-full h-full z-[20]",eZ().overlay)}),(0,o.jsx)(i.E,{imageClassName:"w-full h-screen z-[10]",src:e.postMediaUrl,onClick:T},e.postMediaId)]});case"video":return(0,o.jsxs)("div",{className:"relative h-full",children:[(0,o.jsx)(eU,{className:"w-full h-full",mediaUrl:e.postMediaUrl,playerRef:function(e){return b.current[t]=e},OnClick:T,isMute:_,onVideoTimerUpdate:function(e){return P(t,e)}}),(0,o.jsx)(eT.Q,{onChange:E,videoTimer:w[t]||{duration:0,playedSeconds:0,playedPercent:0},onTouchMove:Z,onTouchEnd:L,className:(0,er.d)("px-2 fuck absolute bottom-5 z-20",eZ().progressBar)})]},e.postMediaId);default:return(0,o.jsx)("div",{className:"ratio-1-1 flex items-center justify-center",children:"Unsupported media type"},t)}})})})}var eR=n(51383),eF=n(96879),ez=n(84714),eB=n(78631),eD=n.n(eB),eV={isLiked:{iconColor:"primary",iconName:"favoriteOn"},isDisliked:{iconColor:"white",iconName:"favoriteOff"}},eJ=(0,U.forwardRef)(function(e,t){var n=e.className,i=e.post,l=e.postReaction,r=e.isOpenCommentModal,a=e.onOpenCommentModal,u=e.onCloseCommentModal,c=e.onSuccessLike,d=e.activePostIndex,m=(0,p.d)(),f=m.onOpen,h=m.isOpen,v=m.onClose,g=i||{},_=g.postCommentsCount,C=g.postId,j=g.postAuthor,N=(0,ez.g)((0,F.Z)((0,R.Z)({},i),{postUserReaction:{isLiked:null==l?void 0:l.isPostLiked}}),c),I=N.handleLikePost,k=N.isLiked,w=N.likesCount,y=k?eV.isLiked:eV.isDisliked,b=function(){I(),(0,ec.He)({postId:C,authorId:null==j?void 0:j.authorId,placeIndex:d})},O=function(){(0,ec.ac)({postAuthorId:null==j?void 0:j.authorId,postId:C}),(0,x.p)({message:"برای استفاده از امکانات کامل از اپلیکیشن استفاده کنید.",actionText:"دریافت اپلیکیشن",actionFunction:function(){f(),(0,ec.WO)()}})};return(0,U.useImperativeHandle)(t,function(){return{sendLikePost:b}}),(0,o.jsxs)("div",{className:(0,er.d)(n,"flex gap-3 flex-col items-center"),children:[(0,o.jsx)(eR.P,{children:(0,o.jsxs)("span",{className:"cursor-pointer text-white flex flex-col items-center text-body-strong",onClick:b,children:[(0,o.jsx)(s.J,{color:y.iconColor,size:24,icon:y.iconName}),(0,o.jsx)(eF.I,{value:w})]})}),(0,o.jsxs)("span",{className:"cursor-pointer text-white flex flex-col items-center text-body-strong",children:[(0,o.jsx)(s.J,{color:"white",size:24,icon:"comment",onClick:function(){a(),(0,ec.HT)({postAuthorId:null==j?void 0:j.authorId,postId:C})}}),_>0&&(0,o.jsx)(eF.I,{value:_})]}),(0,o.jsx)("span",{"data-testid":"install-app-icon",className:"cursor-pointer flex items-center text-button-1 user-select-none",onClick:O,children:(0,o.jsx)(s.J,{color:"white",size:24,icon:"favOff"})}),(0,o.jsx)(ed.r,{post:i,isOpen:r,onClose:u,hasCloseIcon:!0,commentItemClassName:eD().commentItem,headerHideBottomBorder:!0,commentItemContainerClassName:eD().commentItem,inputDisabled:!0,inputOnClick:O,modalClassName:eD().modal}),(0,o.jsx)(P,{onClose:v,isOpen:h})]})}),eq=n(5046);function eH(e){var t=e.className,n=e.post;return(0,o.jsx)("div",{className:(0,er.d)(t,"relative h-full"),children:(0,o.jsx)(eq.l,{shouldDisplayShowMore:!1,titleColor:"text-neutral-100",captionColor:"text-neutral-100",post:n})})}var eX=n(66524),eG=n(92428),eK=n(36155),eQ=n(14052),eY=n(52483),eW=n(42729),e$=n(45227),e0=(0,y.q)({url:"magnet/affiliate/",type:e$.XN.POST,inputTransformer:function(e){return{post_id:e.postId,product_id:e.productId}}}),e2=n(5257),e1=n.n(e2);function e5(e){var t,n,s=e.className,i=e.products,l=e.postId,r=e.postAuthorId,a=1===i.length,u=(0,eX.R)({modalId:eW.f.VIDEO_BABY_PDP}),c=u.isOpen,d=u.onClose,p=u.onOpen,m=(0,A.Z)((0,U.useState)({productId:null,product:null}),2),f=m[0],h=m[1],x=(0,I.E)({apiMethod:eK.z,onSuccess:function(e){var t=e.product;h(function(e){return(0,F.Z)((0,R.Z)({},e),{product:t})}),p()}}),v=x.request,g=x.pending,_=(0,I.E)({apiMethod:e0}).request,C=(0,U.useRef)(null),j=!1;return(0,Z.x)(i)?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:(0,er.d)(s,"flex gap-2 overflow-x-auto  hide-scrollbar p-2"),onMouseDown:function(e){j=!0,t=e.pageX-C.current.offsetLeft,n=C.current.scrollLeft},onMouseLeave:function(e){j=!1},onMouseUp:function(e){j=!1},onMouseMove:function(e){if(j){e.preventDefault(),e.stopPropagation();var o=e.pageX-C.current.offsetLeft;C.current.scrollLeft=n-(o-t)*3}},ref:C,children:i.map(function(e,t){var n;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(eQ.z,{loading:g&&e.productId===f.productId,className:(0,er.d)("ml-2 lg:ml-0 select-none h-[50px]",e1().productBackground,{"!w-full":a}),onClick:(n=e.productId,function(){h(function(e){return(0,F.Z)((0,R.Z)({},e),{productId:n})}),v({productId:n}),_({productId:n,postId:l}),(0,ec.H9)({productId:n,postId:l,placeIndex:t,authorId:r})}),productImage:e.productImage,productTitle:e.productTitle,productPrice:e.productPrice,height:46,width:46},e.productId)})})}),f.product&&(0,o.jsx)(eY.J,{onAddToCart:function(e){(0,ec.q_)({productId:e,postId:l,postAuthorId:r})},onShowMoreClicked:function(e){(0,ec.dE)({productId:e,postId:l,postAuthorId:r})},isOpenModal:c,closeModal:function(){h({product:null,productId:null}),d()},product:f.product,type:eG.J.MAGNET_LIVE})]})}var e7=n(27525),e3=n.n(e7),e4=function(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(s.J,{"data-testId":"Like",size:100,color:"error",icon:"favoriteOn",className:(0,er.d)("z-2 absolute",e3().like)})})},e6=n(6726),e8=n(48607),e9=n(26514),te=n.n(e9);function tt(e){var t,n,s,r,a,u,d=e.className,p=e.post,m=e.postReaction,f=e.onCloseVideoModal,h=e.toPreviousPost,x=e.toNextPost,g=e.updateLikeReaction,_=e.updateAuthorFollowedReaction,C=e.isEndOfReels,j=e.activePostIndex;e.followingUserName;var N=(0,U.useRef)(null),I=(0,U.useRef)(null),k=(0,eg.d)(),w=k.isOpen,y=k.onOpen,b=k.onClose,O=(0,A.Z)((0,U.useState)(!1),2),S=O[0],P=O[1],M=(0,e8.Y)({onSwipedUp:!w&&x,onSwipedDown:!w&&h,onSwipedLeft:function(){},onSwipedRight:function(){}}),T=M.onTouchStart,E=M.onTouchMove,Z=M.onTouchEnd,L=(0,eO.P2)(function(){P(!0),N.current&&N.current.sendLikePost(),setTimeout(function(){return P(!1)},2e3)},300),R=(0,U.useCallback)(function(){return(0,U.useMemo)(function(){return(0,o.jsxs)("div",{className:(0,er.d)("w-full h-full relative"),children:[(0,o.jsx)(eb.x,{className:"absolute right-5 top-8 z-2",color:"white",onClick:f}),(0,o.jsx)(eL,{playerRef:I,post:p,videoOnDoubleClick:L,activePostIndex:j})]})},[null==p?void 0:p.postId])},[null==p?void 0:p.postId]);return C?(0,o.jsxs)("div",{className:(0,er.d)("custom-content-container h-full flex flex-col items-center justify-center px-3",te().endOfReelsContainer),onTouchStart:T,onTouchMove:E,onTouchEnd:Z,children:[(0,o.jsx)(eb.x,{className:"absolute right-5 top-8 z-2",color:"white",onClick:f}),(0,o.jsx)(i.E,{src:"/statics/img/png/magnet/magnet-arrow.png",alt:"magnet-arrow",width:66,height:66,className:"mb-4"}),(0,o.jsx)("p",{className:"text-white text-h5",children:"دسترسی به هزاران ویدیو نقد و بررسی"}),(0,o.jsxs)("p",{className:"text-body-1 text-neutral-200 text-center mt-2",children:["برای تماشای بیشتر ویدیو‌های مگنت،‌ اپلیکیشن ",(0,o.jsx)("br",{}),"دیجی‌کالا را دریافت کنید."]}),(0,o.jsx)(e6.J,{buttonClassName:te().button,className:te().installApp,onDataTracker:ec.I8}),(0,o.jsx)("div",{className:(0,er.d)(te().animationImage,"mt-12")})]}):(0,o.jsxs)("div",{className:(0,er.d)(d,"w-full h-full flex flex-col"),onTouchStart:T,onTouchMove:E,onTouchEnd:Z,children:[(0,o.jsxs)("div",{className:"flex flex-col justify-between absolute w-full z-2 bottom-[10%]",children:[(0,o.jsxs)("div",{className:"flex items-end gap-1 justify-between px-5 mb-4",children:[(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsxs)("section",{className:(0,er.d)("flex items-center justify-start"),children:[(0,o.jsxs)(l.r,{className:"flex items-center",to:(0,c.kK)(null==p?void 0:null===(t=p.postAuthor)||void 0===t?void 0:t.authorUsername),children:[(0,o.jsx)(i.E,{className:"shrink-0",imageClassName:"rounded-circle",image:null==p?void 0:null===(n=p.postAuthor)||void 0===n?void 0:n.authorPhoto,src:v.C,height:40,width:40}),(0,o.jsxs)("div",{className:"mr-2 ml-4",children:[(0,o.jsx)("p",{className:"text-h5 text-neutral-100",children:null==p?void 0:null===(s=p.postAuthor)||void 0===s?void 0:s.authorName}),(0,o.jsxs)("p",{className:"text-caption text-neutral-100",children:[null==p?void 0:null===(r=p.postAuthor)||void 0===r?void 0:r.authorUsername,"@"]})]})]}),(0,o.jsx)(eR.P,{children:(0,o.jsx)(et.n,{isFollowing:null==m?void 0:m.isAuthorFollowed,isFollowShape:"text",isNotFollowShape:"outlined",username:null==p?void 0:null===(a=p.postAuthor)||void 0===a?void 0:a.authorUsername,color:"white",size:"small",className:"h-7",onSuccess:_,onDataTracker:function(){var e,t;return(0,ec.gb)({postAuthorId:null==p?void 0:null===(e=p.postAuthor)||void 0===e?void 0:e.authorId,postId:null==p?void 0:p.postId,followingUserName:null==p?void 0:null===(t=p.postAuthor)||void 0===t?void 0:t.authorUsername})}})})]}),(0,o.jsx)(eH,{className:"mt-3",post:p}),(0,o.jsx)(eu,{post:p,className:te().likeText,containerClassName:te().likeContainer})]}),(0,o.jsx)(eJ,{ref:N,post:p,postReaction:m,isOpenCommentModal:w,onOpenCommentModal:y,onCloseCommentModal:b,onSuccessLike:g,activePostIndex:j})]}),(0,o.jsx)(e5,{className:"shrink-0 grow-0 ",postId:null==p?void 0:p.postId,postAuthorId:null==p?void 0:null===(u=p.postAuthor)||void 0===u?void 0:u.authorId,products:null==p?void 0:p.postProducts})]}),(0,o.jsx)(R,{}),S&&(0,o.jsx)(e4,{})]})}var tn={overlay:{zIndex:4}};function to(e){var t=e.post,n=e.postReaction,s=e.isOpen,i=e.onClose,l=e.toNextPost,r=e.toPreviousPost,a=e.onVideoEnded,u=e.updateLikeReaction,c=e.updateAuthorFollowedReaction,d=e.isEndOfReels,p=e.hasPreviousPost,m=e.activePostIndex,f=e.followingUserName,h=(0,ew.C)().isDesktop,x=t||{},v=x.postId,g=x.postAuthor,_=(0,U.useRef)(window.innerHeight);(0,ey.N)({condition:s}),(0,U.useEffect)(function(){s&&(0,ec._H)({postId:v,postAuthorId:null==g?void 0:g.authorId})},[s]);var C=function(){(0,ec.Yk)({postId:v,postAuthorId:null==g?void 0:g.authorId}),i()};return(0,o.jsx)(ek(),{isOpen:s,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,onRequestClose:C,className:(0,er.d)("relative w-fit lg:px-20 mx-auto bg-black flex justify-center items-center flex-row z-[2000]"),style:tn,children:(0,o.jsx)("div",{className:"grow-0 lg:w-90 w-screen relative",style:h?{height:_.current>760?"720px":"".concat(.95*_.current,"px")}:{height:"".concat(_.current,"px")},children:(0,o.jsx)(tt,{activePostIndex:m,onCloseVideoModal:C,onVideoEnded:a,post:t,postReaction:n,toNextPost:l,toPreviousPost:r,updateLikeReaction:u,updateAuthorFollowedReaction:c,isEndOfReels:d,hasPreviousPost:p,followingUserName:f})})})}function ts(e){var t=e.isOpenVideoModal,n=e.onCloseVideoModal,s=e.postClicked,i=e.followingUserName;if(!s)return console.error("No initial reel post found in localStorage."),null;var l=(0,U.useRef)(!1),r=(0,A.Z)((0,U.useState)([s]),2),a=r[0],u=r[1],c=(0,A.Z)((0,U.useState)(0),2),d=c[0],p=c[1],m=a[d],f=(m||{}).postId,h=(0,A.Z)((0,U.useState)({}),2),x=h[0],v=h[1],g=(0,I.E)({apiMethod:G,onSuccess:function(e){var t=(Array.isArray(e.posts)?e.posts:[]).filter(function(e){return e.postId!==s.postId});u(function(e){return(0,em.Z)(e).concat((0,em.Z)(t.slice(0,9)),[{isSpecialItem:!0}])}),l.current=!0}}),_=g.request,j=g.pending;(0,U.useEffect)(function(){var e,n=(e=(0,e_.Z)(function(){return(0,ej.__generator)(this,function(e){switch(e.label){case 0:if(l.current)return[3,2];return[4,_()];case 1:e.sent(),e.label=2;case 2:return[2]}})}),function(){return e.apply(this,arguments)});t&&n()},[t,_]),(0,U.useEffect)(function(){m&&!m.isSpecialItem&&v(function(e){var t,n;return(0,F.Z)((0,R.Z)({},e),(0,eC.Z)({},f,e[f]||{isPostLiked:null==m?void 0:null===(t=m.postUserReaction)||void 0===t?void 0:t.isLiked,isAuthorFollowed:null==m?void 0:null===(n=m.postAuthor)||void 0===n?void 0:n.authorIsFollowing}))})},[m,f]);var N=0!==d||m.isSpecialItem,k=d<a.length-1;return j&&a.length>1?(0,o.jsx)(C.g,{}):(0,Z.x)(a)||eN.s||!m?null:(0,o.jsx)(to,{followingUserName:i,activePostIndex:d,toNextPost:function(){k&&p(function(e){return e+1})},toPreviousPost:function(){N&&p(function(e){return e-1})},hasNextPost:k,isEndOfReels:m.isSpecialItem,hasPreviousPost:N,post:m.isSpecialItem?null:m,postReaction:x[f],isOpen:t,onClose:function(){p(0),n()},onVideoEnded:function(){return""},updateLikeReaction:function(e){return v(function(t){return(0,F.Z)((0,R.Z)({},t),(0,eC.Z)({},f,(0,F.Z)((0,R.Z)({},t[f]),{isPostLiked:e})))})},updateAuthorFollowedReaction:function(e){return v(function(t){return(0,F.Z)((0,R.Z)({},t),(0,eC.Z)({},f,(0,F.Z)((0,R.Z)({},t[f]),{isAuthorFollowed:e})))})}})}var ti=n(47792),tl=n(28147),tr=n(67090),ta=n.n(tr),tu={isLiked:{iconColor:"primary",iconName:"favoriteOn"},isDisliked:{iconColor:"high-emphasis",iconName:"favoriteOff"}};function tc(e){var t=e.isLiked,n=e.setIsLiked,i=e.post,l=e.handlePost,r=e.onOpenCommentModal,a=e.postIndex,u=t?tu.isLiked:tu.isDisliked,c=(0,p.d)(),d=c.onOpen,m=c.isOpen,f=c.onClose,h=(0,I.E)({apiMethod:ti.m}).request;return(0,U.useEffect)(function(){n(i.postUserReaction.isLiked)},[i.postUserReaction.isLiked]),(0,o.jsxs)("div",{className:"flex items-center justify-between text-neutral-650 px-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-start select-none focus:outline-none",children:[(0,o.jsx)("div",{"data-testid":"Like",className:(0,er.d)("flex items-center text-button-1 ml-3",ta().noSelect),onClick:function(){(0,ec.KD)({authorId:null==i?void 0:i.postAuthor.authorId,postId:null==i?void 0:i.postId,placeIndex:a}),n(function(e){return!e}),h({postId:i.postId}).catch(function(){n(function(e){return!e})})},children:(0,o.jsx)(s.J,{size:24,color:null==u?void 0:u.iconColor,icon:null==u?void 0:u.iconName})}),(0,o.jsxs)("span",{"data-testid":"comment",className:"flex items-center text-button-1 ml-3",onClick:function(){var e;l(i),r(),(0,ec.xy)({postAuthorId:null==i?void 0:null===(e=i.postAuthor)||void 0===e?void 0:e.authorId,postId:null==i?void 0:i.postId})},children:[(0,o.jsx)(s.J,{className:"mr-1",color:"high-emphasis",size:24,icon:"comment"}),i.postCommentsCount>0&&(0,o.jsx)("span",{className:"text-icon-high-emphasis mr-1",children:(0,E.U)(i.postCommentsCount)})]}),(0,o.jsx)("span",{"data-testid":"share",className:"cursor-pointer flex items-center text-button-1",children:(0,o.jsx)(tl.z,{shareUrls:i.postShareUrls,iconColor:"high-emphasis",shareMessage:"این پروفایل رو با دوستان خود به اشتراک بگذارید.",telegramClassName:ta().shareContainer,whatsappClassName:ta().shareContainer,smsClassName:ta().shareContainer,copyBtnClassName:ta().shareContainer,twitterClassName:ta().shareContainer,shareMessageClassName:"text-center",icon:"cube-action-share",onDataTracker:function(){var e;return(0,ec.BK)({postAuthorId:null==i?void 0:null===(e=i.postAuthor)||void 0===e?void 0:e.authorId,postId:null==i?void 0:i.postId})}})})]}),(0,o.jsx)("span",{"data-testid":"install-app-icon",className:"cursor-pointer flex items-center text-button-1 user-select-none",onClick:function(){var e;(0,ec.e$)({postAuthorId:null==i?void 0:null===(e=i.postAuthor)||void 0===e?void 0:e.authorId,postId:null==i?void 0:i.postId}),(0,x.p)({message:"برای استفاده از امکانات کامل از اپلیکیشن استفاده کنید.",actionText:"دریافت اپلیکیشن",actionFunction:function(){d(),(0,ec.WO)()}})},children:(0,o.jsx)(s.J,{size:24,icon:"favOff"})}),(0,o.jsx)(P,{onClose:f,isOpen:m})]})}var td=n(23568),tp=n(89618),tm=n.n(tp),tf=(0,U.memo)(function(e){var t=e.post,n=e.setIsLiked,s=e.onMediaClicked,i=e.onVideoRefUpdate,l=e.postIndex,r=1===t.postMedia.length,a=(0,A.Z)((0,U.useState)(!1),2),u=a[0],c=a[1],d=(0,A.Z)((0,U.useState)(0),2),p=d[0],m=d[1],f=(0,U.useRef)([]),h=(0,U.useRef)(null),x=function(e,t){m(t)},v=(0,I.E)({apiMethod:ti.m}).request,g=function(){f.current.forEach(function(e,t){e&&(t===p?e.play():e.pause())})};(0,U.useEffect)(function(){var e=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target===h.current?g():f.current.forEach(function(e){return null==e?void 0:e.pause()})})},{threshold:.01});return h.current&&e.observe(h.current),function(){h.current&&e.unobserve(h.current)}},[p]);var _=(0,eO.P2)(function(){c(!0),n(function(e){return!e}),v({postId:t.postId}).catch(function(){c(!0)}),(0,ec.KD)({authorId:null==t?void 0:t.postAuthor.authorId,postId:null==t?void 0:t.postId,placeIndex:l}),setTimeout(function(){return c(!1)},2e3)},300),C=(0,U.useCallback)(function(){return(0,U.useMemo)(function(){return(0,o.jsx)("div",{className:(0,er.d)("w-full relative"),children:(0,o.jsx)(td.F,{postMedia:t.postMedia,handleCurrentSlideVideo:x,videoRefs:f,videoClassName:tm().videoContainer,videoOnDoubleClick:_,videoOnClick:s,hasSpeakerButton:!0,showSlideNumber:!1,hasAutoPlay:!1,onVideoRefUpdate:i,navigationButtonClassName:{prev:"hidden hidden",next:"hidden hidden"},sliderContainerClassName:tm().sliderContainer,pagination:{clickable:!0,clickableClass:tm().clickableClass,bulletClass:(0,er.d)(r?"d-none":"inline-block rounded-circle mx-1 bg-neutral-900",(0,eC.Z)({},tm().slider__pagination,!r)),bulletActiveClass:(0,er.d)(r?"d-none":tm()["slider__pagination--active"])}})})},[null==t?void 0:t.postId])},[null==t?void 0:t.postId]);return(0,o.jsxs)("div",{ref:h,className:(0,er.d)("flex mb-2 relative",tm().mainContainer),children:[(0,o.jsx)(C,{}),u&&(0,o.jsx)(e4,{})]})});function th(e){var t=e.post,n=e.handlePost,s=e.onOpenCommentModal,i=e.postIndex,l=e.followingUserName,r=(0,A.Z)((0,U.useState)(!1),2),a=r[0],u=r[1],c=(0,A.Z)((0,U.useState)(null),2),d=c[0],p=c[1],m=(0,A.Z)((0,U.useState)(),2),f=m[0],h=m[1],x=(0,eg.d)(),v=x.isOpen,g=x.onOpen,_=x.onClose,C=function(e){p(e),g(),(0,ec.uN)({postAuthorId:null==t?void 0:t.postAuthor.authorId,postId:null==t?void 0:t.postId})};return(0,U.useEffect)(function(){v&&f&&f.pause()},[v]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tf,{post:t,setIsLiked:u,onMediaClicked:function(){return C(t)},onVideoRefUpdate:function(e,t){h(e.current[t])},postIndex:i}),(0,o.jsx)(tc,{isLiked:a,post:t,setIsLiked:u,handlePost:n,onOpenCommentModal:s,postIndex:i}),d&&(0,o.jsx)(ts,{isOpenVideoModal:v,postClicked:d,onCloseVideoModal:function(){p(null),_()},followingUserName:l})]})}var tx=function(e){var t=e.postCaption,n=e.maxLength,s=void 0===n?100:n,i=e.postTitle,l=(0,A.Z)((0,U.useState)(!1),2),r=l[0],a=l[1],u=(null==t?void 0:t.length)>s?(null==t?void 0:t.slice(0,s))+"...":t;return(0,o.jsxs)("div",{className:"px-5",children:[i&&(0,o.jsx)("p",{className:"text-neutral-800 text-subtitle-strong mt-3 mb-1",children:i}),(0,o.jsxs)("p",{className:"text-body-1 text-neutral-700",children:[r?t:u,(null==t?void 0:t.length)>s&&(0,o.jsx)("span",{className:"cursor-pointer text-blue-700",onClick:function(){a(!r)},children:!r&&"ادامه"})]})]})},tv=n(20096),tg=n.n(tv);function t_(){return(0,o.jsxs)("div",{className:(0,er.d)(tg().imageBackground,"flex flex-col items-center justify-center"),children:[(0,o.jsx)(i.E,{src:"/statics/img/png/magnet/magnet-arrow.png",alt:"magnet-arrow",width:56,height:56}),(0,o.jsx)("p",{className:"text-neutral-850 text-h5",children:"دسترسی به هزاران ویدیو نقد و بررسی"}),(0,o.jsxs)("p",{className:"text-body-1 text-neutral-650 text-center",children:["برای استفاده از امکانات مگنت،‌ اپلیکیشن دیجی‌کالا را ",(0,o.jsx)("br",{}),"دریافت کنید."]}),(0,o.jsx)(e6.J,{buttonClassName:tg().button,className:tg().installApp,onDataTracker:ec.WO})]})}var tC=n(23665),tj=n.n(tC);function tN(e){var t=e.author,n=e.postId;return e.followingUserName,(0,o.jsxs)("section",{className:"flex justify-between items-center px-4 py-2",children:[(0,o.jsx)(l.r,{to:(0,c.kK)(t.authorUsername),children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)(i.E,{width:32,height:32,className:"shrink-0 ml-2",imageClassName:"rounded-circle",image:null==t?void 0:t.authorPhoto,src:v.C,alt:null==t?void 0:t.authorUsername}),(0,o.jsx)("span",{className:"text-body-1 text-neutral-700",children:null==t?void 0:t.authorUsername})]})}),!t.authorIsFollowing&&(0,o.jsx)(et.n,{"data-testId":"FollowUnfollow",className:(0,er.d)(tj().followUnfollowButton),isFollowing:null==t?void 0:t.authorIsFollowing,username:null==t?void 0:t.authorUsername,size:"small",isNotFollowLabel:"دنبال کردن",onDataTracker:function(){return(0,ec.UD)({postAuthorId:null==t?void 0:t.authorId,postId:n,followingUserName:null==t?void 0:t.authorUsername})}})]})}var tI=n(79075),tk=n.n(tI);function tw(e){var t=e.followingUserName,n=(0,p.d)(),s=n.isOpen,i=n.onOpen,l=n.onClose,r=(0,p.d)(),a=r.onOpen,u=r.isOpen,c=r.onClose,d=(0,A.Z)((0,U.useState)(),2),m=d[0],f=d[1],h=(0,A.Z)((0,U.useState)(!1),2),v=h[0],g=h[1],_=(0,A.Z)((0,U.useState)(),2),C=_[0],j=_[1],N=(0,T.a)({apiMethod:G}),I=N.items,k=N.pending,w=(0,U.useMemo)(function(){return Object.entries(I||{}).filter(function(e){var t=(0,A.Z)(e,2)[1];return!(0,Z.x)(t)}).flatMap(function(e){var t=(0,A.Z)(e,2);return(t[0],t[1]).posts||[]}).slice(0,10)},[I]),y=function(e){f(e)},b=(0,ep.S)({onIntersect:function(){return g(!0)},enabled:!k&&10===w.length}).targetRef,O=function(e,t){var n;j({id:e,index:t}),(0,ec.LW)({productId:null==C?void 0:C.id,placeIndex:null==C?void 0:C.index,postId:null==m?void 0:m.postId,authorId:null==m?void 0:null===(n=m.postAuthor)||void 0===n?void 0:n.authorId})};return k?(0,o.jsx)(ev,{}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"py-1 bg-app-background-dark"}),w.map(function(e,n){return(0,o.jsxs)("section",{className:"bg-white mt-1",children:[(0,o.jsx)(tN,{author:e.postAuthor,postId:null==e?void 0:e.postId,followingUserName:t}),(0,o.jsx)(th,{post:e,handlePost:y,onOpenCommentModal:i,postIndex:n,followingUserName:t}),(0,o.jsx)(eu,{post:e,containerClassName:"my-3"}),(0,o.jsx)(tx,{postCaption:e.postCaption,postTitle:e.postTitle}),(0,o.jsx)(K.k,{"data-testId":"product",className:"px-5 pt-3",products:e.postProducts,productOnClick:O}),(0,o.jsx)("p",{className:"text-body-1 text-neutral-600 px-4 py-1 mx-5 mt-3",children:(0,E.U)(e.postCreatedAt)}),(0,o.jsx)("div",{className:"py-1 bg-app-background-dark mt-4"})]},e.postId)}),(0,o.jsx)(ed.r,{post:m,isOpen:s,onClose:l,hasCloseIcon:!0,commentItemClassName:tk().commentItem,headerHideBottomBorder:!0,commentItemContainerClassName:tk().commentItem,inputDisabled:!0,inputOnClick:function(){(0,x.p)({message:"برای استفاده از امکانات کامل از اپلیکیشن استفاده کنید.",actionText:"دریافت اپلیکیشن",actionFunction:function(){a(),(0,ec.WO)()}})}}),(0,o.jsx)(P,{onClose:c,isOpen:u}),(0,o.jsx)("div",{ref:b}),v&&(0,o.jsx)(t_,{})]})}var ty=(0,h.D)({component:function(){var e=(0,m.v)(f.p.isLoggedIn),t=(0,p.d)(),n=t.onOpen,a=t.isOpen,u=t.onClose,h=function(){(0,x.p)({message:"برای استفاده از امکانات کامل از اپلیکیشن استفاده کنید.",actionText:"دریافت اپلیکیشن",actionFunction:function(){n(),(0,ec.WO)()}})},_=(0,d.V)({apiMethod:e?M:null}).data||{},C=_.user,j=_.notificationCount;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("section",{className:"flex items-center justify-between px-4 shadow-1-bottom",children:[(0,o.jsx)(r.mQ,{className:"w-20",children:(0,o.jsx)(r.td,{className:"lg:border-complete-b-200",children:(0,o.jsx)(r.OK,{className:"w-20 px-2 py-3",children:(0,o.jsx)("div",{children:"برای شما"})})})}),(0,o.jsxs)("div",{className:"flex items-center justify-end gap-5",children:[(0,o.jsx)(s.J,{icon:"cube-action-search",size:24,onClick:h}),(0,o.jsx)(s.J,{icon:"cube-alert-notification-outline",count:j,countBgColor:"primary",countClassName:"w-full text-neutral-000",size:24,onClick:h}),(0,o.jsx)(l.r,{to:c.DF,children:(0,o.jsx)(i.E,{width:32,height:32,className:"shrink-0 ml-2",imageClassName:"rounded-circle",image:null==C?void 0:C.photo,src:v.C,alt:null==C?void 0:C.username})})]})]}),(0,o.jsx)(g.h,{}),(0,o.jsx)(tw,{followingUserName:null==C?void 0:C.username}),(0,o.jsx)(P,{onClose:u,isOpen:a})]})},layoutProps:{type:a.B.MAGNET},pageActivatorFeature:u.X.MAGNET})},42067:function(e,t,n){"use strict";n.d(t,{OK:function(){return o.OK},mQ:function(){return o.mQ},nP:function(){return o.nP},td:function(){return o.td},x4:function(){return o.x4}});var o=n(64091)},51207:function(e,t,n){"use strict";n.d(t,{S:function(){return o.S1}});var o=n(18687)},29078:function(e){e.exports={pagination:"styles_pagination__v4cV2",currentSlideNumber:"styles_currentSlideNumber__K7Vi9",sliderContainer:"styles_sliderContainer__wuxyN",slider:"styles_slider__QmtBk",slider__arrow:"styles_slider__arrow__myacE",slider__navigator:"styles_slider__navigator__UphJt",slider__pagination:"styles_slider__pagination__uJXGd","slider__pagination--active":"styles_slider__pagination--active__XHxoY",progressBar:"styles_progressBar__P5xJZ",overlay:"styles_overlay__v1vA9"}},78631:function(e){e.exports={commentItem:"styles_commentItem__MA8yJ",modal:"styles_modal__zgvX3"}},26514:function(e){e.exports={likeText:"styles_likeText__LPySa",likeContainer:"styles_likeContainer__EPPGL",endOfReelsContainer:"styles_endOfReelsContainer__qTiJA",animationImage:"styles_animationImage__QLEjy",scroll:"styles_scroll__ypYnv",button:"styles_button__zkf7C",installApp:"styles_installApp__7u6Nz"}},5257:function(e){e.exports={productBackground:"styles_productBackground__PGIZR"}},57955:function(e){e.exports={overlay:"styles_overlay__kYs2C"}},32e3:function(e){e.exports={postSkeleton:"styles_postSkeleton__YGrr1",avatarSkeleton:"styles_avatarSkeleton__L0hWr",usernameSkeleton:"styles_usernameSkeleton__XFl1_",imageSkeleton:"styles_imageSkeleton__io7rG",contentSkeleton:"styles_contentSkeleton__8Bn7S"}},67090:function(e){e.exports={shareContainer:"styles_shareContainer__XrCwQ",noSelect:"styles_noSelect__B_dzG"}},20096:function(e){e.exports={imageBackground:"styles_imageBackground__0l5LG",button:"styles_button__Mkl23",installApp:"styles_installApp__u5o6w"}},89618:function(e){e.exports={mainContainer:"styles_mainContainer__mp1AU",videoContainer:"styles_videoContainer__bven6",slider:"styles_slider__TXNrL",slider__arrow:"styles_slider__arrow__lpYjx",slider__navigator:"styles_slider__navigator___RjtT",slider__pagination:"styles_slider__pagination__cezEo","slider__pagination--active":"styles_slider__pagination--active__sm5vT",clickableClass:"styles_clickableClass__pOBdD",sliderContainer:"styles_sliderContainer__zr0bP"}},23665:function(e){e.exports={followUnfollowButton:"styles_followUnfollowButton__z6T_R"}},79075:function(e){e.exports={commentItem:"styles_commentItem___hEvu"}},27525:function(e){e.exports={like:"styles_like__FXCf8",scaleUp:"styles_scaleUp__q1hE9",fadeOut:"styles_fadeOut__fHsD4"}},14767:function(e){e.exports={bottomSheetContainer:"styles_bottomSheetContainer__nuqjQ"}},25127:function(e){e.exports={followUnfollowButton:"styles_followUnfollowButton__VMikO"}}},function(e){e.O(0,[3325,5338,6547,3459,6023,960,5480,9911,1334,151,5192,4234,9774,2888,179],function(){return e(e.s=29851)}),_N_E=e.O()}]);