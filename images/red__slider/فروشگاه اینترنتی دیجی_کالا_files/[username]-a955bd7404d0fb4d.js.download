(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9711],{89529:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/magnet/users/[username]",function(){return t(97073)}])},97073:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return k}});var r=t(70865),o=t(96670),s=t(66383),a=t(52322),u=t(2784),i=t(5632),l=t(72610),c=t(88589),p=t(64665),f=t(26442),d=t(94133),g=t(72873),h=t(41701),m=t(41435),v=t(69605),w=t(643),_=t(57727),P=t(46932),I=t(1324),M=t(25143),C=(0,I.q)({url:function(n){var e=n.username;return"magnet/users/".concat(e,"/posts/")},transformer:function(n){var e=n.data||{},t=e.posts,r=e.pager;return{posts:(null==t?void 0:t.map(function(n){return(0,M.E)({data:n})}))||[],pager:(0,P.d)({data:r})}},inputTransformer:function(n){return{page:n.page,size:15}}}),E=t(8398),N=t(96207),O=(0,I.q)({url:function(n){var e=n.username;return"magnet/users/".concat(e,"/")},transformer:function(n){var e=n.data||{},t=e.user,r=e.is_following,o=e.is_user_profile;return{user:(0,N.s)({data:t}),isFollowing:r,isUserProfile:o}},inputTransformer:E.d}),T=t(50930),j=t(79593),k=(0,h.D)({component:function(){var n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.onClose,t=n.onOpen,r=(0,i.useRouter)(),o=new Set((r.asPath.split("#")[1]||"").split(",")),s=function(n){return Boolean(n.match(/^[0-9]+$/))},a=function(n){if(!j.s){var e=window.location.hash.replace(/^#+/,"").split(","),t=e.some(s)?"replace":"push",o=e.filter(function(n){return n&&!s(n)}),a=o.length?o.concat(n).join(","):n;r[t]("#".concat(a),"#".concat(a),{shallow:!0})}},u=(0,T.Z)(o).find(s),l=Boolean(u),c=function(){if(null==e||e(),window.history.length>1)r.back();else{var n=(0,T.Z)(o).filter(function(n){return!s(n)}).join(",");r.replace("#".concat(n))}},p=function(n){null==t||t(),a(n)};return{isOpen:l,onOpen:p,onClose:c,onToggle:function(n){l?c():p(n)},key:u}}(),e=n.isOpen,t=n.key,c=n.onOpen,p=n.onClose,h=(0,i.useRouter)().query.username,P=(0,g.V)({apiMethod:O,apiData:{username:h},onSuccess:function(n){n.isUserProfile&&(0,v.u)({url:f.DF})}}),I=P.data,M=P.pending,E=I||{},N=E.user,k=E.isFollowing,y=(0,d.a)({apiMethod:C,apiData:{username:h},disabled:M,onSuccess:function(n){var t=n.response;e&&c(t.posts[0].postId)}}),x=y.data,A=y.fetchPage,Z=y.pending,b=y.items,F=(x||{}).pager,D=(0,u.useMemo)(function(){return Object.entries(b||{}).filter(function(n){var e=(0,s.Z)(n,2)[1];return!(0,m.x)(e)}).flatMap(function(n){var e=(0,s.Z)(n,2);return(e[0],e[1]).posts}).map(function(n,e){return(0,o.Z)((0,r.Z)({},n),{itemIndex:e})})},[b,null==F?void 0:F.pagerCurrentPage]),U=(0,u.useMemo)(function(){return D.find(function(n){return n.postId===t})},[t,D]);return(0,a.jsxs)("div",{children:[(0,a.jsx)(w.h,{headerTitle:null==N?void 0:N.username,shareUrls:null==N?void 0:N.shareUrls,hasInstallAppCta:!0}),M?(0,a.jsx)(l.g,{className:"my-20"}):(0,a.jsx)(_.I,{activePostInModal:U,setActivePostInModal:function(n){n?c(n.postId):p()},user:N,isFollowing:k,posts:D,postsPager:F,fetchPage:A,pending:Z})]})},layoutProps:{type:c.B.MAGNET,hasInstallAppCta:!0},pageActivatorFeature:p.X.MAGNET})}},function(n){n.O(0,[3325,3459,1334,151,9442,9774,2888,179],function(){return n(n.s=89529)}),_N_E=n.O()}]);